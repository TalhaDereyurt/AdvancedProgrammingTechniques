<!DOCTYPE html>
<html>
<head>
  <title>Labirent Oyunu</title>
</head>
<body>
  <canvas id="labirent" width="400" height="360"></canvas>
  <!-- Yön butonları -->

  <h1>
    <button id="left">←</button>
    <button id="up">↑</button>
    <button id="right">→</button>
    <button id="down">↓</button>
  </h1>
  <script>
// Ekran boyutunu al
//var screenWidth = window.innerWidth;
//var screenHeight = window.innerHeight;
let stepSize = 3;
    // Canvas elemanını al
var canvas = document.getElementById('labirent');
    // Canvas elemanını mobil cihazlara uygun hale getir
//canvas.width = screenWidth;
//canvas.height = screenHeight;
// Canvas elemanının 2D contextini al
var ctx = canvas.getContext('2d');
// Düğmeleri dinle
document.getElementById('left').addEventListener('click', function() {
  // Sol düğmeye basıldı
  moveKarakter(-stepSize, 0);
  // Labirenti tekrar çiz
  renderLabirent();
});
document.getElementById('up').addEventListener('click', function() {
  // Yukarı düğmeye basıldı
  moveKarakter(0, -stepSize);
  // Labirenti tekrar çiz
  renderLabirent();
});
document.getElementById('right').addEventListener('click', function() {
  // Sağ düğmeye basıldı
  moveKarakter(stepSize, 0);
  // Labirenti tekrar çiz
  renderLabirent();
});
document.getElementById('down').addEventListener('click', function() {
  // Aşağı düğmeye basıldı
  moveKarakter(0, stepSize);
  // Labirenti tekrar çiz
  renderLabirent();
});

// Karakteri oluştur
var karakter = {
  x: 50,
  y: 50,
  width: 20,
  height: 20
};

// Labirenti oluştur
var labirent = [  [1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
  [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
  [1, 0, 1, 1, 1, 1, 1, 1, 0, 1],
  [1, 0, 1, 0, 0, 0, 0, 1, 0, 1],
  [1, 0, 1, 0, 1, 1, 0, 1, 0, 1],
  [1, 0, 1, 0, 1, 0, 0, 1, 0, 1],
  [1, 0, 1, 1, 1, 0, 1, 1, 0, 1],
  [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
  [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
];

function renderLabirent() {
  // Canvası temizle
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Labirenti çiz
  for (var i = 0; i < labirent.length; i++) {
    for (var j = 0; j < labirent[i].length; j++) {
      if (labirent[i][j] === 1) {
        // Duvar çiz
        ctx.fillStyle = '#000';
        ctx.fillRect(j * 40, i * 40, 40, 40);
      } else {
        // Yol çiz
        ctx.fillStyle = '#fff';
        ctx.fillRect(j * 40, i * 40, 40, 40);
      }
    }
  }

  // Karakteri çiz
  ctx.fillStyle = '#f00';
  ctx.fillRect(karakter.x, karakter.y, karakter.width, karakter.height);
}

// Karakteri hareket ettir
function moveKarakter(dx, dy) {
  // Yeni konumu hesapla
  var newX = karakter.x + dx;
  var newY = karakter.y + dy;
  console.log('New character position:', newX, newY);

  // Labirentin sınırlarını kontrol et -- 50 karakter.x ve y -- 70 ise karakter.x + hareket boyutu
  if (newX >= 40 && newX <= canvas.width - (60) && newY >= (40) && newY <= canvas.height - (60)) {
    // Labirentin içinde ise konumu güncelle
    karakter.x = newX;
    karakter.y = newY;
  } else {

karakter.x = newX;
karakter.y = newY;
setTimeout(() => {
  if (confirm('Oyunu kaybettiniz! Tekrar oynamak ister misiniz?')) {
    location.reload();
  }
}
  , 10);

}}

// Yön tuşlarını dinle
document.addEventListener('keydown', function(event) {
  if (event.keyCode === 37) {
    // Sol yön tuşuna basıldı
    moveKarakter(-stepSize, 0);
  } else if (event.keyCode === 38) {
    // Yukarı yön tuşuna basıldı
    moveKarakter(0, -stepSize);
  } else if (event.keyCode === 39) {
    // Sağ yön tuşuna basıldı
    moveKarakter(stepSize, 0);
  } else if (event.keyCode === 40) {
    // Aşağı yön tuşuna basıldı
    moveKarakter(0, stepSize);
  }

  // Labirenti tekrar çiz
  renderLabirent();
});
  
// Dokunuşları dinle
//canvas.addEventListener('touchstart', function(event) {
  // Dokunuş noktasını al
 // var touch = event.touches[0];

  // Karakterin dokunulan kısma doğru hareket ettir
  //if (touch.clientX > karakter.x) {
    // Dokunuş sağa yapıldı
 //   moveKarakter(karakter.width, 0);
  //} else if (touch.clientX < karakter.x) {
    // Dokunuş sola yapıldı
  //  moveKarakter(-karakter.width, 0);
  //} else if (touch.clientY > karakter.y) {
    // Dokunuş aşağı yapıldı
  //  moveKarakter(0, karakter.height);
  //} else if (touch.clientY < karakter.y) {
    // Dokunuş yukarı yapıldı
  //  moveKarakter(0, -karakter.height);
  //}

  // Labirenti tekrar çiz
 // renderLabirent();
//});
renderLabirent();
  </script>
</body>
</html>